--Таблицы (table) в Lua

--------------------------------------------------------------
-- Что такое таблица?
-- Таблица (table) — это универсальная структура данных в Lua.
-- Таблицы могут хранить сразу много значений: числа, строки, другие таблицы и даже функции.
-- Таблицы используются для создания массивов, списков, словарей, объектов и многого другого.
--------------------------------------------------------------

-- 1. Как создать таблицу?
-- Таблица создаётся с помощью фигурных скобок {}

local fruits = { "яблоко", "банан", "груша" } -- массив (список)

local player = { -- словарь (ключ-значение)
    name = "Alex",
    score = 150,
    isActive = true
}

--------------------------------------------------------------

-- 2. Как обращаться к элементам таблицы?
-- Для массива: по номеру (индексу) в квадратных скобках
print(fruits[1]) -- Выведет: яблоко (нумерация с 1!)

-- Для словаря: по имени ключа через точку или в скобках
print(player.name) -- Выведет: Alex
print(player["score"]) -- Выведет: 150

--------------------------------------------------------------

-- 3. Как изменять значения в таблице?
fruits[2] = "апельсин" -- заменили банан на апельсин
player.score = player.score + 50 -- увеличили счёт игрока

print(fruits[2]) -- Ожидается: апельсин
print(player.score) -- Ожидается: 200

--------------------------------------------------------------

-- 4. Как добавлять новые элементы?
table.insert(fruits, "слива") -- добавили в конец массива
player.level = 3 -- добавили новый ключ

print(fruits[4]) -- Ожидается: слива
print(player.level) -- Ожидается: 3

--------------------------------------------------------------

-- 5. Как узнать длину таблицы?
print(#fruits) -- Ожидается: 4 (количество элементов в массиве)

--------------------------------------------------------------

-- 6. Как перебрать все элементы таблицы?
-- Для массива (списка):
for i = 1, #fruits do
    print("Фрукт №" .. i .. ":", fruits[i])
end

-- Для словаря (ключ-значение):
for key, value in pairs(player) do
    print(key, value)
end

--------------------------------------------------------------

-- 7. Таблицы могут хранить другие таблицы!
local players = {
    { name = "Alex", score = 100 },
    { name = "Rusik", score = 200 }
}

print(players[2].name) -- Ожидается: Rusik

--------------------------------------------------------------

-- 8. Таблицы и функции
-- Можно хранить функции в таблицах и вызывать их

local actions = {
    jump = function() print("Прыжок!") end,
    run = function() print("Бег!") end
}

actions.jump() -- Ожидается: Прыжок!
actions["run"]() -- Ожидается: Бег!

--------------------------------------------------------------

-- Итог:
-- Таблицы — это основной способ хранить и структурировать данные в Lua.
-- С помощью таблиц можно создавать списки, словари, объекты, массивы и многое другое.
-- Таблицы очень гибкие и используются почти в каждом скрипте Roblox.

--------------------------------------------------------------
--------------------------------------------------------------
-- Практические задачи
--------------------------------------------------------------

-- 1. Создание массива
-- Задача:
-- Создай таблицу с тремя любимыми цветами и выведи второй цвет.

-- Решение:
local colors = { "красный", "зелёный", "синий" }
print(colors[2]) -- Ожидается: зелёный

--------------------------------------------------------------

-- 2. Словарь игрока
-- Задача:
-- Создай таблицу playerInfo с ключами name, level, coins.
-- Присвой значения и выведи имя и количество монет.

-- Решение:
local playerInfo = {
    name = "Иван",
    level = 5,
    coins = 120
}
print(playerInfo.name, playerInfo.coins) -- Ожидается: Иван 120

--------------------------------------------------------------

-- 3. Добавление и изменение элементов
-- Задача:
-- В таблицу colors добавь новый цвет "жёлтый".
-- Измени первый цвет на "фиолетовый".

-- Решение:
table.insert(colors, "жёлтый")
colors[1] = "фиолетовый"
print(colors[1], colors[4]) -- Ожидается: фиолетовый жёлтый

--------------------------------------------------------------

-- 4. Перебор таблицы
-- Задача:
-- Перебери таблицу playerInfo и выведи все ключи и значения.

-- Решение:
for key, value in pairs(playerInfo) do
    print(key, value)
end

--------------------------------------------------------------

-- 5. Таблица в таблице
-- Задача:
-- Создай таблицу players, где каждый элемент — таблица с name и score.
-- Выведи имя второго игрока.

-- Решение:
local players = {
    { name = "Аня", score = 80 },
    { name = "Борис", score = 120 }
}
print(players[2].name) -- Ожидается: Борис

--------------------------------------------------------------

-- 6. Итоговое задание
-- Задача:
-- Создай таблицу inventory с предметами: "меч", "щит", "зелье".
-- Добавь предмет "лук".
-- Перебери таблицу и выведи все предметы.

-- Решение:
local inventory = { "меч", "щит", "зелье" }
table.insert(inventory, "лук")
for i = 1, #inventory do
    print(inventory[i])
end